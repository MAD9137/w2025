<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>REST APIs 🚀 | MAD9137</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="iOS App Development">
    
    <link rel="preload" href="/w2025/assets/css/0.styles.b90e271b.css" as="style"><link rel="preload" href="/w2025/assets/js/app.89661042.js" as="script"><link rel="preload" href="/w2025/assets/js/2.19621ee8.js" as="script"><link rel="preload" href="/w2025/assets/js/1.884addea.js" as="script"><link rel="preload" href="/w2025/assets/js/39.25172786.js" as="script"><link rel="prefetch" href="/w2025/assets/js/10.14d5c403.js"><link rel="prefetch" href="/w2025/assets/js/11.03916557.js"><link rel="prefetch" href="/w2025/assets/js/12.b43e8f2c.js"><link rel="prefetch" href="/w2025/assets/js/13.6649c7b8.js"><link rel="prefetch" href="/w2025/assets/js/14.88d905c8.js"><link rel="prefetch" href="/w2025/assets/js/15.7e17213b.js"><link rel="prefetch" href="/w2025/assets/js/16.e53c757f.js"><link rel="prefetch" href="/w2025/assets/js/17.3cc02802.js"><link rel="prefetch" href="/w2025/assets/js/18.81d0be88.js"><link rel="prefetch" href="/w2025/assets/js/19.ca440789.js"><link rel="prefetch" href="/w2025/assets/js/20.5a6b51cb.js"><link rel="prefetch" href="/w2025/assets/js/21.fdfc60c0.js"><link rel="prefetch" href="/w2025/assets/js/22.d45beffc.js"><link rel="prefetch" href="/w2025/assets/js/23.748b914a.js"><link rel="prefetch" href="/w2025/assets/js/24.562b255d.js"><link rel="prefetch" href="/w2025/assets/js/25.07dd87ce.js"><link rel="prefetch" href="/w2025/assets/js/26.a99defbe.js"><link rel="prefetch" href="/w2025/assets/js/27.57083705.js"><link rel="prefetch" href="/w2025/assets/js/28.e39dc93e.js"><link rel="prefetch" href="/w2025/assets/js/29.a5b2f49c.js"><link rel="prefetch" href="/w2025/assets/js/3.f5bb6a7e.js"><link rel="prefetch" href="/w2025/assets/js/30.de0a6d63.js"><link rel="prefetch" href="/w2025/assets/js/31.bfc16249.js"><link rel="prefetch" href="/w2025/assets/js/32.d9c060a0.js"><link rel="prefetch" href="/w2025/assets/js/33.a2d064ce.js"><link rel="prefetch" href="/w2025/assets/js/34.b8161021.js"><link rel="prefetch" href="/w2025/assets/js/35.a40d4351.js"><link rel="prefetch" href="/w2025/assets/js/36.9403338f.js"><link rel="prefetch" href="/w2025/assets/js/37.d8fe8075.js"><link rel="prefetch" href="/w2025/assets/js/38.9e90ebe0.js"><link rel="prefetch" href="/w2025/assets/js/4.86681f1d.js"><link rel="prefetch" href="/w2025/assets/js/40.6681711c.js"><link rel="prefetch" href="/w2025/assets/js/41.f4e3d0a0.js"><link rel="prefetch" href="/w2025/assets/js/42.8c656f3d.js"><link rel="prefetch" href="/w2025/assets/js/43.31dda87d.js"><link rel="prefetch" href="/w2025/assets/js/44.24c69334.js"><link rel="prefetch" href="/w2025/assets/js/45.5e16c653.js"><link rel="prefetch" href="/w2025/assets/js/46.044a1533.js"><link rel="prefetch" href="/w2025/assets/js/47.1830e7db.js"><link rel="prefetch" href="/w2025/assets/js/48.9be09712.js"><link rel="prefetch" href="/w2025/assets/js/49.4451aa8c.js"><link rel="prefetch" href="/w2025/assets/js/5.adc9a5d1.js"><link rel="prefetch" href="/w2025/assets/js/50.81e47b6b.js"><link rel="prefetch" href="/w2025/assets/js/51.3b191912.js"><link rel="prefetch" href="/w2025/assets/js/52.479b82bb.js"><link rel="prefetch" href="/w2025/assets/js/53.729d7b6c.js"><link rel="prefetch" href="/w2025/assets/js/54.4a8647ab.js"><link rel="prefetch" href="/w2025/assets/js/55.055c6480.js"><link rel="prefetch" href="/w2025/assets/js/56.1812c123.js"><link rel="prefetch" href="/w2025/assets/js/57.b2aeb55f.js"><link rel="prefetch" href="/w2025/assets/js/58.9f74ca68.js"><link rel="prefetch" href="/w2025/assets/js/59.973fa6ff.js"><link rel="prefetch" href="/w2025/assets/js/6.6eb1a791.js"><link rel="prefetch" href="/w2025/assets/js/60.dbaf804d.js"><link rel="prefetch" href="/w2025/assets/js/61.bf2bcd99.js"><link rel="prefetch" href="/w2025/assets/js/62.c8975600.js"><link rel="prefetch" href="/w2025/assets/js/63.1dc95d7a.js"><link rel="prefetch" href="/w2025/assets/js/64.b1f5fc8e.js"><link rel="prefetch" href="/w2025/assets/js/65.37d03985.js"><link rel="prefetch" href="/w2025/assets/js/66.cf8375ea.js"><link rel="prefetch" href="/w2025/assets/js/67.f92bb3ff.js"><link rel="prefetch" href="/w2025/assets/js/68.779861c3.js"><link rel="prefetch" href="/w2025/assets/js/69.cc00bcbf.js"><link rel="prefetch" href="/w2025/assets/js/7.b2a63ac7.js"><link rel="prefetch" href="/w2025/assets/js/70.362eb054.js"><link rel="prefetch" href="/w2025/assets/js/71.aad5c756.js"><link rel="prefetch" href="/w2025/assets/js/72.1a4b2363.js"><link rel="prefetch" href="/w2025/assets/js/73.aa3beb5c.js"><link rel="prefetch" href="/w2025/assets/js/74.25ee9996.js"><link rel="prefetch" href="/w2025/assets/js/75.3bca0c1f.js"><link rel="prefetch" href="/w2025/assets/js/76.ed9eeaee.js"><link rel="prefetch" href="/w2025/assets/js/77.2d013309.js"><link rel="prefetch" href="/w2025/assets/js/78.aba051f0.js"><link rel="prefetch" href="/w2025/assets/js/79.bfa621d0.js"><link rel="prefetch" href="/w2025/assets/js/80.5ea75b6b.js"><link rel="prefetch" href="/w2025/assets/js/81.c963a39c.js"><link rel="prefetch" href="/w2025/assets/js/82.cb43b67f.js"><link rel="prefetch" href="/w2025/assets/js/83.d9e9c653.js"><link rel="prefetch" href="/w2025/assets/js/84.827a886f.js"><link rel="prefetch" href="/w2025/assets/js/85.2c52868b.js"><link rel="prefetch" href="/w2025/assets/js/86.ac7150af.js"><link rel="prefetch" href="/w2025/assets/js/87.b3adcd6f.js"><link rel="prefetch" href="/w2025/assets/js/vendors~docsearch.02634ae8.js">
    <link rel="stylesheet" href="/w2025/assets/css/0.styles.b90e271b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2025/" class="home-link router-link-active"><!----> <span class="site-name">MAD9137</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2025/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/modules/week1/lecture1.html" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/w2025/assessment/" class="nav-link">
  Assessments
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2025/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/modules/week1/lecture1.html" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/w2025/assessment/" class="nav-link">
  Assessments
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week1/" class="sidebar-heading clickable"><span>Week 1</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week2/" class="sidebar-heading clickable"><span>Week 2</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week3/" class="sidebar-heading clickable"><span>Week 3</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week4/" class="sidebar-heading clickable"><span>Week 4</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week5/" class="sidebar-heading clickable"><span>Week 5</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week6/" class="sidebar-heading clickable"><span>Week 6</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week7/" class="sidebar-heading clickable"><span>Week 7</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/w2025/modules/week8/" class="sidebar-link">Week 8</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week9/" class="sidebar-heading clickable"><span>Week 9</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week10/" class="sidebar-heading clickable router-link-active open"><span>Week 10</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2025/modules/week10/lecture1.html" class="sidebar-link">Swift async/await 🚀</a></li><li><a href="/w2025/modules/week10/lecture2.html" aria-current="page" class="active sidebar-link">REST APIs 🚀</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/w2025/modules/week10/exercises.html" class="sidebar-link">🤯 Exercises</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week11/" class="sidebar-heading clickable"><span>Week 11</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week12/" class="sidebar-heading clickable"><span>Week 12</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week13/" class="sidebar-heading clickable"><span>Week 13</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week14/" class="sidebar-heading clickable"><span>Week 14</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/w2025/modules/week15/" class="sidebar-link">Week 15</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="rest-apis-🚀"><a href="#rest-apis-🚀" class="header-anchor">#</a> REST APIs 🚀</h1> <p>This week we aill work with REST APIs in Swift, exploring both traditional callback-based methods and the modern <code>async/await</code> pattern. In addition to understanding how to fetch data from a web service, you'll also learn how to display this data in a SwiftUI-based user interface.</p> <p>We will use a weather API as a practical example throughout this guide, showcasing how to retrieve weather information for a specific city and present it in a simple SwiftUI app.</p> <h3 id="what-is-a-rest-api"><a href="#what-is-a-rest-api" class="header-anchor">#</a> What is a REST API?</h3> <p>A REST (Representational State Transfer) API is a set of rules that developers follow when creating and interacting with web services. These rules determine how a client (like an iOS app) can access and manipulate data on a server. REST APIs rely on standard HTTP methods, making them easy to use and widely supported.</p> <h3 id="why-use-rest-apis-in-your-app"><a href="#why-use-rest-apis-in-your-app" class="header-anchor">#</a> Why Use REST APIs in Your App?</h3> <p>REST APIs are essential in modern app development because they allow your app to:</p> <ul><li><strong>Access Data</strong>: Retrieve information from remote servers, such as weather data, news articles, or user profiles.</li> <li><strong>Send Data</strong>: Submit data to a server, like user input, new posts, or file uploads.</li> <li><strong>Interact with External Services</strong>: Integrate third-party services into your app, such as payment gateways, social media, or location-based services.</li></ul> <h3 id="http-methods-in-rest-apis"><a href="#http-methods-in-rest-apis" class="header-anchor">#</a> HTTP Methods in REST APIs</h3> <p>Understanding the basic HTTP methods is crucial when working with REST APIs:</p> <ul><li><strong>GET</strong>: This method is used to retrieve data from a server. For example, when you want to fetch weather data for a city, you'd use a GET request.</li> <li><strong>POST</strong>: Used to send data to a server, typically when creating new resources. For instance, submitting a user registration form would involve a POST request.</li> <li><strong>PUT</strong>: This method updates an existing resource on the server. If you need to change user profile information, a PUT request would be appropriate.</li> <li><strong>DELETE</strong>: As the name suggests, this method deletes a resource on the server. An example would be removing a user account.</li></ul> <h3 id="components-of-a-rest-api-request"><a href="#components-of-a-rest-api-request" class="header-anchor">#</a> Components of a REST API Request</h3> <p>When making a request to a REST API, several key components come into play:</p> <ul><li><strong>Base URL</strong>: The root address of the API you're interacting with. For example, OpenWeatherMap's base URL is <code>https://api.openweathermap.org</code>.</li> <li><strong>Endpoint</strong>: The specific path that leads to the desired resource. For instance, <code>/data/2.5/weather</code> is an endpoint that fetches current weather data.</li> <li><strong>Query Parameters</strong>: These are key-value pairs added to the endpoint to modify the request, such as specifying a city or API key (e.g., <code>?q=London&amp;appid=your_api_key</code>).</li></ul> <h3 id="setting-up-your-swiftui-project"><a href="#setting-up-your-swiftui-project" class="header-anchor">#</a> Setting Up Your SwiftUI Project</h3> <p>Before diving into the code, ensure your SwiftUI project is set up correctly:</p> <ol><li><p><strong>Create a New SwiftUI Project</strong>: Open Xcode, select &quot;Create a new Xcode project,&quot; choose &quot;App,&quot; and make sure &quot;SwiftUI&quot; is selected as the interface.</p></li> <li><p><strong>Add Necessary Permissions</strong>: If you're accessing the internet, ensure you have the appropriate permissions by adding the following to your <code>Info.plist</code>:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>NSAppTransportSecurity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dict</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>NSAllowsArbitraryLoads<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>true</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dict</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <h3 id="accessing-a-weather-api-using-callbacks"><a href="#accessing-a-weather-api-using-callbacks" class="header-anchor">#</a> Accessing a Weather API Using Callbacks</h3> <p>In the first approach, we will use a traditional method involving callbacks to fetch weather data. This method is slightly more complex to manage due to the nested nature of the callback but is widely supported across different iOS versions.</p> <h4 id="step-1-create-a-data-model"><a href="#step-1-create-a-data-model" class="header-anchor">#</a> Step 1: Create a Data Model</h4> <p>Start by creating a Swift model that corresponds to the JSON data returned by the weather API:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">Foundation</span>

<span class="token keyword">struct</span> <span class="token class-name">WeatherData</span><span class="token punctuation">:</span> <span class="token class-name">Codable</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> main<span class="token punctuation">:</span> <span class="token class-name">Main</span>
    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">Main</span><span class="token punctuation">:</span> <span class="token class-name">Codable</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> temp<span class="token punctuation">:</span> <span class="token class-name">Double</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><strong><code>Codable</code> Protocol</strong>: The <code>Codable</code> protocol is essential here as it allows your Swift struct to be easily encoded to and decoded from JSON. This is especially useful when dealing with REST APIs where JSON is the standard data format.</li></ul> <h4 id="step-2-implement-the-network-call"><a href="#step-2-implement-the-network-call" class="header-anchor">#</a> Step 2: Implement the Network Call</h4> <p>Now, let's create a network service that fetches weather data using a callback:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">Foundation</span>

<span class="token keyword">class</span> <span class="token class-name">WeatherService</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> apiKey <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;your_api_key&quot;</span></span>
    <span class="token keyword">let</span> baseURL <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;https://api.openweathermap.org/data/2.5/weather&quot;</span></span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchWeather</span><span class="token punctuation">(</span><span class="token keyword">for</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> completion<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">WeatherData</span><span class="token punctuation">,</span> <span class="token class-name">Error</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> urlString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">baseURL</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">?q=</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">city</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&amp;appid=</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">apiKey</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&amp;units=metric&quot;</span></span>
        <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> urlString<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token class-name">NSError</span><span class="token punctuation">(</span>domain<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">NSLocalizedDescriptionKey</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Invalid URL&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> task <span class="token operator">=</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">dataTask</span><span class="token punctuation">(</span>with<span class="token punctuation">:</span> url<span class="token punctuation">)</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> response<span class="token punctuation">,</span> error <span class="token keyword">in</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> error <span class="token operator">=</span> error <span class="token punctuation">{</span>
                <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">guard</span> <span class="token keyword">let</span> data <span class="token operator">=</span> data <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token class-name">NSError</span><span class="token punctuation">(</span>domain<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">NSLocalizedDescriptionKey</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;No data received&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">do</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> weatherData <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">JSONDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">WeatherData</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> data<span class="token punctuation">)</span>
                <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>weatherData<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token keyword">let</span> decodingError <span class="token punctuation">{</span>
                <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span>decodingError<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        task<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ul><li><strong><code>URLSession</code></strong>: This is a powerful API that allows you to perform network tasks, such as fetching data from the internet. Here, we use it to make a GET request to the weather API.</li> <li><strong>Error Handling</strong>: We handle various potential errors, such as invalid URLs, lack of data, and decoding errors. This is crucial for creating a robust application that can deal with unexpected issues.</li></ul> <h4 id="step-3-display-the-data-in-swiftui"><a href="#step-3-display-the-data-in-swiftui" class="header-anchor">#</a> Step 3: Display the Data in SwiftUI</h4> <p>Next, we will create a simple SwiftUI interface to display the fetched weather data.</p> <h5 id="create-a-viewmodel"><a href="#create-a-viewmodel" class="header-anchor">#</a> Create a ViewModel</h5> <p>We’ll use the MVVM (Model-View-ViewModel) pattern to separate the network logic from the SwiftUI view.</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span>
<span class="token keyword">import</span> <span class="token class-name">Combine</span>

<span class="token keyword">class</span> <span class="token class-name">WeatherViewModel</span><span class="token punctuation">:</span> <span class="token class-name">ObservableObject</span> <span class="token punctuation">{</span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> weatherData<span class="token punctuation">:</span> <span class="token class-name">WeatherData</span><span class="token operator">?</span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> errorMessage<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> weatherService <span class="token operator">=</span> <span class="token class-name">WeatherService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weatherService<span class="token punctuation">.</span><span class="token function">fetchWeather</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> city<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">weak</span> <span class="token keyword">self</span><span class="token punctuation">]</span> result <span class="token keyword">in</span>
            <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
                <span class="token keyword">switch</span> result <span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">let</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>weatherData <span class="token operator">=</span> data
                <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">let</span> error<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">self</span><span class="token operator">?</span><span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span>localizedDescription
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li><strong><code>@Published</code> Properties</strong>: These properties are observed by the SwiftUI view, allowing it to update automatically when the data changes.</li> <li><strong>Dispatching to the Main Thread</strong>: Since <code>URLSession</code> runs on a background thread, we use <code>DispatchQueue.main.async</code> to update the UI on the main thread.</li></ul> <h5 id="create-the-swiftui-view"><a href="#create-the-swiftui-view" class="header-anchor">#</a> Create the SwiftUI View</h5> <p>Finally, let's create a SwiftUI view to display the weather data:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
    <span class="token attribute atrule">@StateObject</span> <span class="token keyword">private</span> <span class="token keyword">var</span> viewModel <span class="token operator">=</span> <span class="token class-name">WeatherViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
        <span class="token class-name">VStack</span> <span class="token punctuation">{</span>
            <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Enter city name&quot;</span></span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> $viewModel<span class="token punctuation">.</span>city<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">textFieldStyle</span><span class="token punctuation">(</span><span class="token class-name">RoundedBorderTextFieldStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                viewModel<span class="token punctuation">.</span><span class="token function">fetchWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Get Weather&quot;</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">cornerRadius</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token keyword">let</span> weatherData <span class="token operator">=</span> viewModel<span class="token punctuation">.</span>weatherData <span class="token punctuation">{</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;City: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">weatherData<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Temperature: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">weatherData<span class="token punctuation">.</span>main<span class="token punctuation">.</span>temp</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">°C&quot;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token operator">!</span>viewModel<span class="token punctuation">.</span>errorMessage<span class="token punctuation">.</span>isEmpty <span class="token punctuation">{</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>viewModel<span class="token punctuation">.</span>errorMessage<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><ul><li><strong>TextField</strong>: This allows the user to input the city name.</li> <li><strong>Button</strong>: When clicked, this button triggers the <code>fetchWeather</code> method in the <code>WeatherViewModel</code>.</li> <li><strong>Conditional Views</strong>: Depending on whether the weather data or an error message is available, the appropriate view is displayed.</li></ul> <h3 id="accessing-a-weather-api-using-async-await"><a href="#accessing-a-weather-api-using-async-await" class="header-anchor">#</a> Accessing a Weather API Using Async/Await</h3> <p>While callbacks are effective, Swift's <code>async/await</code> pattern simplifies the process, making asynchronous code easier to read and maintain. Let's rewrite the previous example using this modern approach.</p> <h4 id="step-1-modify-the-weatherservice-for-async-await"><a href="#step-1-modify-the-weatherservice-for-async-await" class="header-anchor">#</a> Step 1: Modify the WeatherService for Async/Await</h4> <p>Here's how the <code>WeatherService</code> would look using <code>async/await</code>:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">Foundation</span>

<span class="token keyword">class</span> <span class="token class-name">WeatherServiceAsync</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> apiKey <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;your_api_key&quot;</span></span>
    <span class="token keyword">let</span> baseURL <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;https://api.openweathermap.org/data/2.5/weather&quot;</span></span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchWeather</span><span class="token punctuation">(</span><span class="token keyword">for</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">WeatherData</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> urlString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">baseURL</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">?q=</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">city</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&amp;appid=</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">apiKey</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&amp;units=metric&quot;</span></span>
        <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> urlString<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token class-name">URLError</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badURL<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token omit keyword">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> url<span class="token punctuation">)</span>
        <span class="token keyword">let</span> weatherData <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">JSONDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">WeatherData</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> weatherData
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li><strong>Simplified Error Handling</strong>: With `async</li></ul> <p>/await<code>, error handling becomes more straightforward using</code>try<code>and</code>catch`.</p> <ul><li><strong>Cleaner Syntax</strong>: The code is more readable, without the nesting that occurs with callbacks.</li></ul> <h4 id="step-2-update-the-viewmodel"><a href="#step-2-update-the-viewmodel" class="header-anchor">#</a> Step 2: Update the ViewModel</h4> <p>Now, let's update the <code>WeatherViewModel</code> to use the new async/await service:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span>

<span class="token keyword">class</span> <span class="token class-name">WeatherViewModelAsync</span><span class="token punctuation">:</span> <span class="token class-name">ObservableObject</span> <span class="token punctuation">{</span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> weatherData<span class="token punctuation">:</span> <span class="token class-name">WeatherData</span><span class="token operator">?</span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> city<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span>
    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> errorMessage<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> weatherService <span class="token operator">=</span> <span class="token class-name">WeatherServiceAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">func</span> <span class="token function-definition function">fetchWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Task</span> <span class="token punctuation">{</span>
            <span class="token keyword">do</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> weatherService<span class="token punctuation">.</span><span class="token function">fetchWeather</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> city<span class="token punctuation">)</span>
                <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
                    <span class="token keyword">self</span><span class="token punctuation">.</span>weatherData <span class="token operator">=</span> data
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
                <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
                    <span class="token keyword">self</span><span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span>localizedDescription
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><strong><code>Task</code></strong>: This is used to call async functions from a non-async context, such as SwiftUI views or other non-async code.</li></ul> <h4 id="step-3-use-the-updated-viewmodel-in-swiftui"><a href="#step-3-use-the-updated-viewmodel-in-swiftui" class="header-anchor">#</a> Step 3: Use the Updated ViewModel in SwiftUI</h4> <p>Finally, update the SwiftUI view to use the new <code>WeatherViewModelAsync</code>:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token class-name">SwiftUI</span>

<span class="token keyword">struct</span> <span class="token class-name">ContentViewAsync</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
    <span class="token attribute atrule">@StateObject</span> <span class="token keyword">private</span> <span class="token keyword">var</span> viewModel <span class="token operator">=</span> <span class="token class-name">WeatherViewModelAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
        <span class="token class-name">VStack</span> <span class="token punctuation">{</span>
            <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Enter city name&quot;</span></span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> $viewModel<span class="token punctuation">.</span>city<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">textFieldStyle</span><span class="token punctuation">(</span><span class="token class-name">RoundedBorderTextFieldStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token class-name">Button</span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                viewModel<span class="token punctuation">.</span><span class="token function">fetchWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Get Weather&quot;</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>blue<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>white<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">cornerRadius</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token keyword">let</span> weatherData <span class="token operator">=</span> viewModel<span class="token punctuation">.</span>weatherData <span class="token punctuation">{</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;City: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">weatherData<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Temperature: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">weatherData<span class="token punctuation">.</span>main<span class="token punctuation">.</span>temp</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">°C&quot;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token operator">!</span>viewModel<span class="token punctuation">.</span>errorMessage<span class="token punctuation">.</span>isEmpty <span class="token punctuation">{</span>
                <span class="token class-name">Text</span><span class="token punctuation">(</span>viewModel<span class="token punctuation">.</span>errorMessage<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">foregroundColor</span><span class="token punctuation">(</span><span class="token punctuation">.</span>red<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/13/2025, 12:59:45 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/w2025/modules/week10/lecture1.html" class="prev">
        Swift async/await 🚀
      </a></span> <span class="next"><a href="/w2025/modules/week10/exercises.html">
        🤯 Exercises
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/w2025/assets/js/app.89661042.js" defer></script><script src="/w2025/assets/js/2.19621ee8.js" defer></script><script src="/w2025/assets/js/1.884addea.js" defer></script><script src="/w2025/assets/js/39.25172786.js" defer></script>
  </body>
</html>
