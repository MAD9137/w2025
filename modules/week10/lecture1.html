<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Swift async/await ðŸš€ | MAD9137</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="iOS App Development">
    
    <link rel="preload" href="/w2025/assets/css/0.styles.b90e271b.css" as="style"><link rel="preload" href="/w2025/assets/js/app.89661042.js" as="script"><link rel="preload" href="/w2025/assets/js/2.19621ee8.js" as="script"><link rel="preload" href="/w2025/assets/js/1.884addea.js" as="script"><link rel="preload" href="/w2025/assets/js/38.9e90ebe0.js" as="script"><link rel="prefetch" href="/w2025/assets/js/10.14d5c403.js"><link rel="prefetch" href="/w2025/assets/js/11.03916557.js"><link rel="prefetch" href="/w2025/assets/js/12.b43e8f2c.js"><link rel="prefetch" href="/w2025/assets/js/13.6649c7b8.js"><link rel="prefetch" href="/w2025/assets/js/14.88d905c8.js"><link rel="prefetch" href="/w2025/assets/js/15.7e17213b.js"><link rel="prefetch" href="/w2025/assets/js/16.e53c757f.js"><link rel="prefetch" href="/w2025/assets/js/17.3cc02802.js"><link rel="prefetch" href="/w2025/assets/js/18.81d0be88.js"><link rel="prefetch" href="/w2025/assets/js/19.ca440789.js"><link rel="prefetch" href="/w2025/assets/js/20.5a6b51cb.js"><link rel="prefetch" href="/w2025/assets/js/21.fdfc60c0.js"><link rel="prefetch" href="/w2025/assets/js/22.d45beffc.js"><link rel="prefetch" href="/w2025/assets/js/23.748b914a.js"><link rel="prefetch" href="/w2025/assets/js/24.562b255d.js"><link rel="prefetch" href="/w2025/assets/js/25.07dd87ce.js"><link rel="prefetch" href="/w2025/assets/js/26.a99defbe.js"><link rel="prefetch" href="/w2025/assets/js/27.57083705.js"><link rel="prefetch" href="/w2025/assets/js/28.e39dc93e.js"><link rel="prefetch" href="/w2025/assets/js/29.a5b2f49c.js"><link rel="prefetch" href="/w2025/assets/js/3.f5bb6a7e.js"><link rel="prefetch" href="/w2025/assets/js/30.de0a6d63.js"><link rel="prefetch" href="/w2025/assets/js/31.bfc16249.js"><link rel="prefetch" href="/w2025/assets/js/32.d9c060a0.js"><link rel="prefetch" href="/w2025/assets/js/33.a2d064ce.js"><link rel="prefetch" href="/w2025/assets/js/34.b8161021.js"><link rel="prefetch" href="/w2025/assets/js/35.a40d4351.js"><link rel="prefetch" href="/w2025/assets/js/36.9403338f.js"><link rel="prefetch" href="/w2025/assets/js/37.d8fe8075.js"><link rel="prefetch" href="/w2025/assets/js/39.25172786.js"><link rel="prefetch" href="/w2025/assets/js/4.86681f1d.js"><link rel="prefetch" href="/w2025/assets/js/40.6681711c.js"><link rel="prefetch" href="/w2025/assets/js/41.f4e3d0a0.js"><link rel="prefetch" href="/w2025/assets/js/42.8c656f3d.js"><link rel="prefetch" href="/w2025/assets/js/43.31dda87d.js"><link rel="prefetch" href="/w2025/assets/js/44.24c69334.js"><link rel="prefetch" href="/w2025/assets/js/45.5e16c653.js"><link rel="prefetch" href="/w2025/assets/js/46.044a1533.js"><link rel="prefetch" href="/w2025/assets/js/47.1830e7db.js"><link rel="prefetch" href="/w2025/assets/js/48.9be09712.js"><link rel="prefetch" href="/w2025/assets/js/49.4451aa8c.js"><link rel="prefetch" href="/w2025/assets/js/5.adc9a5d1.js"><link rel="prefetch" href="/w2025/assets/js/50.81e47b6b.js"><link rel="prefetch" href="/w2025/assets/js/51.3b191912.js"><link rel="prefetch" href="/w2025/assets/js/52.479b82bb.js"><link rel="prefetch" href="/w2025/assets/js/53.729d7b6c.js"><link rel="prefetch" href="/w2025/assets/js/54.4a8647ab.js"><link rel="prefetch" href="/w2025/assets/js/55.055c6480.js"><link rel="prefetch" href="/w2025/assets/js/56.1812c123.js"><link rel="prefetch" href="/w2025/assets/js/57.b2aeb55f.js"><link rel="prefetch" href="/w2025/assets/js/58.9f74ca68.js"><link rel="prefetch" href="/w2025/assets/js/59.973fa6ff.js"><link rel="prefetch" href="/w2025/assets/js/6.6eb1a791.js"><link rel="prefetch" href="/w2025/assets/js/60.dbaf804d.js"><link rel="prefetch" href="/w2025/assets/js/61.bf2bcd99.js"><link rel="prefetch" href="/w2025/assets/js/62.c8975600.js"><link rel="prefetch" href="/w2025/assets/js/63.1dc95d7a.js"><link rel="prefetch" href="/w2025/assets/js/64.b1f5fc8e.js"><link rel="prefetch" href="/w2025/assets/js/65.37d03985.js"><link rel="prefetch" href="/w2025/assets/js/66.cf8375ea.js"><link rel="prefetch" href="/w2025/assets/js/67.f92bb3ff.js"><link rel="prefetch" href="/w2025/assets/js/68.779861c3.js"><link rel="prefetch" href="/w2025/assets/js/69.cc00bcbf.js"><link rel="prefetch" href="/w2025/assets/js/7.b2a63ac7.js"><link rel="prefetch" href="/w2025/assets/js/70.362eb054.js"><link rel="prefetch" href="/w2025/assets/js/71.aad5c756.js"><link rel="prefetch" href="/w2025/assets/js/72.1a4b2363.js"><link rel="prefetch" href="/w2025/assets/js/73.aa3beb5c.js"><link rel="prefetch" href="/w2025/assets/js/74.25ee9996.js"><link rel="prefetch" href="/w2025/assets/js/75.3bca0c1f.js"><link rel="prefetch" href="/w2025/assets/js/76.ed9eeaee.js"><link rel="prefetch" href="/w2025/assets/js/77.2d013309.js"><link rel="prefetch" href="/w2025/assets/js/78.aba051f0.js"><link rel="prefetch" href="/w2025/assets/js/79.bfa621d0.js"><link rel="prefetch" href="/w2025/assets/js/80.5ea75b6b.js"><link rel="prefetch" href="/w2025/assets/js/81.c963a39c.js"><link rel="prefetch" href="/w2025/assets/js/82.cb43b67f.js"><link rel="prefetch" href="/w2025/assets/js/83.d9e9c653.js"><link rel="prefetch" href="/w2025/assets/js/84.827a886f.js"><link rel="prefetch" href="/w2025/assets/js/85.2c52868b.js"><link rel="prefetch" href="/w2025/assets/js/86.ac7150af.js"><link rel="prefetch" href="/w2025/assets/js/87.b3adcd6f.js"><link rel="prefetch" href="/w2025/assets/js/vendors~docsearch.02634ae8.js">
    <link rel="stylesheet" href="/w2025/assets/css/0.styles.b90e271b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2025/" class="home-link router-link-active"><!----> <span class="site-name">MAD9137</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2025/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/modules/week1/lecture1.html" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/w2025/assessment/" class="nav-link">
  Assessments
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2025/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/modules/week1/lecture1.html" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/w2025/assessment/" class="nav-link">
  Assessments
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week1/" class="sidebar-heading clickable"><span>Week 1</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week2/" class="sidebar-heading clickable"><span>Week 2</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week3/" class="sidebar-heading clickable"><span>Week 3</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week4/" class="sidebar-heading clickable"><span>Week 4</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week5/" class="sidebar-heading clickable"><span>Week 5</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week6/" class="sidebar-heading clickable"><span>Week 6</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week7/" class="sidebar-heading clickable"><span>Week 7</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/w2025/modules/week8/" class="sidebar-link">Week 8</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week9/" class="sidebar-heading clickable"><span>Week 9</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week10/" class="sidebar-heading clickable router-link-active open"><span>Week 10</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2025/modules/week10/lecture1.html" aria-current="page" class="active sidebar-link">Swift async/await ðŸš€</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/w2025/modules/week10/lecture2.html" class="sidebar-link">REST APIs ðŸš€</a></li><li><a href="/w2025/modules/week10/exercises.html" class="sidebar-link">ðŸ¤¯ Exercises</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week11/" class="sidebar-heading clickable"><span>Week 11</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week12/" class="sidebar-heading clickable"><span>Week 12</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week13/" class="sidebar-heading clickable"><span>Week 13</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week14/" class="sidebar-heading clickable"><span>Week 14</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/w2025/modules/week15/" class="sidebar-link">Week 15</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="swift-async-await-ðŸš€"><a href="#swift-async-await-ðŸš€" class="header-anchor">#</a> Swift <code>async</code>/<code>await</code> ðŸš€</h1> <p>Swift's <code>async</code>/<code>await</code> is a modern concurrency model introduced in Swift 5.5. It simplifies writing asynchronous code by making it look more like synchronous code, improving readability and maintainability. This model helps in handling operations that are time-consuming or need to wait for external resources, such as network requests or file operations.</p> <h3 id="key-concepts"><a href="#key-concepts" class="header-anchor">#</a> Key Concepts</h3> <ol><li><strong>Asynchronous Functions (<code>async</code>):</strong> Functions that perform asynchronous operations and can be paused and resumed. They are declared with the <code>async</code> keyword.</li> <li><strong>Await Expressions (<code>await</code>):</strong> Used to pause the execution of an asynchronous function until the result is available. It is placed before calling an <code>async</code> function.</li> <li><strong>Task:</strong> Represents a unit of asynchronous work. You use <code>Task</code> to start an asynchronous operation.</li></ol> <h3 id="declaring-and-calling-asynchronous-functions"><a href="#declaring-and-calling-asynchronous-functions" class="header-anchor">#</a> Declaring and Calling Asynchronous Functions</h3> <p>In Swift, asynchronous functions are declared using the <code>async</code> keyword. This keyword indicates that the function performs work that might take some time to complete and can be paused and resumed later. A crucial rule when working with asynchronous functions is that they can only be called from within other asynchronous functions or within a <code>Task</code>. This ensures that the asynchronous nature of these functions is properly managed.</p> <h4 id="basic-syntax"><a href="#basic-syntax" class="header-anchor">#</a> Basic Syntax</h4> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token comment">// Simulate a network delay</span>
    <span class="token keyword">await</span> <span class="token class-name">Task</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1_000_000_000</span><span class="token punctuation">)</span> <span class="token comment">// 2 seconds</span>
    <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;Fetched Data&quot;</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p><strong><code>func fetchData() async -&gt; String</code>:</strong> This function named <code>fetchData</code> is an asynchronous function. It takes no parameters and returns a <code>String</code>. The <code>async</code> keyword before the return type indicates that this function is asynchronous.</p></li> <li><p><strong><code>await Task.sleep(2 * 1_000_000_000)</code>:</strong> Inside the function, <code>await</code> is used before calling another asynchronous operation. In this case, <code>Task.sleep</code> simulates a delay of 2 seconds, pausing the function's execution.</p></li> <li><p><strong><code>return &quot;Fetched Data&quot;</code>:</strong> After the delay, the function returns a string <code>&quot;Fetched Data&quot;</code>. This return value could represent the result of a network request, file read, or another asynchronous task in real-world scenarios.</p></li></ul> <h4 id="example-of-an-async-function-calling-another-async-function"><a href="#example-of-an-async-function-calling-another-async-function" class="header-anchor">#</a> Example of an Async Function Calling Another Async Function</h4> <p>If you want to call the <code>fetchData()</code> function from another function, that function must also be asynchronous. Hereâ€™s how you can do that:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">loadUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token comment">// Call another async function</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;User data loaded: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>Calling an Async Function:</strong> The <code>loadUserData()</code> function is declared as <code>async</code> because it calls another async function, <code>fetchData()</code>. The <code>await</code> keyword pauses the execution of <code>loadUserData()</code> until <code>fetchData()</code> returns its result.</li></ul> <h3 id="calling-an-asynchronous-function"><a href="#calling-an-asynchronous-function" class="header-anchor">#</a> Calling an Asynchronous Function</h3> <p>To call an asynchronous function, you must be in an asynchronous context. Swift provides two primary ways to do this: inside another asynchronous function or within a <code>Task</code>.</p> <h4 id="calling-in-an-async-context-using-task"><a href="#calling-in-an-async-context-using-task" class="header-anchor">#</a> Calling in an Async Context Using <code>Task</code></h4> <p>If you are in a synchronous context (e.g., inside a regular function or the global scope), you need to use a <code>Task</code> to create an asynchronous context. Hereâ€™s how to call <code>fetchData()</code> using a <code>Task</code>:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">Task</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p><strong><code>Task { ... }</code>:</strong> The <code>Task</code> initializer creates an asynchronous context, allowing you to use <code>await</code> to call async functions like <code>fetchData()</code>.</p></li> <li><p><strong>Restrictions:</strong> Without a <code>Task</code> or being inside another async function, attempting to call <code>fetchData()</code> would result in a compile-time error.</p></li></ul> <h4 id="expanded-example-with-multiple-async-calls"><a href="#expanded-example-with-multiple-async-calls" class="header-anchor">#</a> Expanded Example with Multiple Async Calls</h4> <p>Hereâ€™s an example where you call <code>fetchUserData(for:)</code> twice, sequentially, within a <code>Task</code>:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">Task</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> user1Data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserData</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;user123&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>user1Data<span class="token punctuation">)</span>

    <span class="token keyword">let</span> user2Data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserData</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;user456&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>user2Data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><strong>Sequential Execution:</strong> The <code>await</code> keyword ensures that the second call to <code>fetchUserData(for: &quot;user456&quot;)</code> only starts after the first call completes.</li></ul> <h4 id="parallel-execution-with-async-let"><a href="#parallel-execution-with-async-let" class="header-anchor">#</a> Parallel Execution with <code>async let</code></h4> <p>Swift also allows you to execute multiple asynchronous tasks in parallel using <code>async let</code>, which can improve efficiency by running tasks concurrently:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">Task</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token keyword">let</span> user1Data <span class="token operator">=</span> <span class="token function">fetchUserData</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;user123&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">async</span> <span class="token keyword">let</span> user2Data <span class="token operator">=</span> <span class="token function">fetchUserData</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;user456&quot;</span></span><span class="token punctuation">)</span>

    <span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span>user1Data<span class="token punctuation">,</span> user2Data<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;User 1: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">results<span class="token punctuation">.</span><span class="token number">0</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, User 2: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">results<span class="token punctuation">.</span><span class="token number">1</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><p><strong><code>async let</code>:</strong> This keyword starts both <code>fetchUserData</code> calls in parallel. The execution proceeds without waiting for either task to complete immediately.</p></li> <li><p><strong>Parallel Execution:</strong> By using <code>async let</code>, the two tasks run concurrently, potentially reducing the overall waiting time compared to sequential execution.</p></li></ul> <h3 id="handling-asynchronous-results"><a href="#handling-asynchronous-results" class="header-anchor">#</a> Handling Asynchronous Results</h3> <p>When dealing with asynchronous results, it's common to combine results or handle errors.</p> <h4 id="combining-results"><a href="#combining-results" class="header-anchor">#</a> Combining Results</h4> <p>You can combine results from multiple asynchronous functions like this:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">Task</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token keyword">let</span> data1 <span class="token operator">=</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">async</span> <span class="token keyword">let</span> data2 <span class="token operator">=</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">let</span> combinedData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data1</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> &amp; </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data2</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Combined Data: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">combinedData</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><strong>Combining Strings:</strong> In this example, the results of two asynchronous <code>fetchData()</code> calls are combined into a single string after both tasks complete.</li></ul> <h4 id="handling-errors"><a href="#handling-errors" class="header-anchor">#</a> Handling Errors</h4> <p>Asynchronous functions can throw errors, which can be managed using <code>try</code> and <code>await</code> together:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">Task</span> <span class="token punctuation">{</span>
    <span class="token keyword">do</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">fetchDataWithError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to fetch data: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p><strong><code>try await</code>:</strong> When calling an asynchronous function that can throw an error, you use <code>try</code> along with <code>await</code>.</p></li> <li><p><strong><code>catch</code> block:</strong> Errors thrown by the asynchronous function are caught in the <code>catch</code> block, allowing you to handle the error appropriately.</p></li></ul> <p>In Swift, asynchronous functions declared with the <code>async</code> keyword offer a powerful way to manage tasks that take time to complete, such as network requests or file I/O. These functions can only be called from within other asynchronous functions or a <code>Task</code>, ensuring that the asynchronous operations are properly managed and executed without blocking the main thread or mishandling concurrency.</p> <h3 id="example-converting-callbacks-to-async-await"><a href="#example-converting-callbacks-to-async-await" class="header-anchor">#</a> Example: Converting Callbacks to Async/Await</h3> <p>Let's start with an example using callbacks. Consider a function that fetches data with a completion handler:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">fetchDataWithCompletion</span><span class="token punctuation">(</span>completion<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token comment">// Simulate a network delay</span>
        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Fetched Data&quot;</span></span>
        <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
            <span class="token function">completion</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>Usage:</strong></p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>fetchDataWithCompletion <span class="token punctuation">{</span> data <span class="token keyword">in</span>
    <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="async-await-conversion"><a href="#async-await-conversion" class="header-anchor">#</a> Async/Await Conversion</h4> <ol><li><strong>Convert the Callback Function to an Async Function:</strong></li></ol> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token comment">// Use withCheckedContinuation to bridge between callback and async/await</span>
    <span class="token keyword">await</span> withCheckedContinuation <span class="token punctuation">{</span> continuation <span class="token keyword">in</span>
        fetchDataWithCompletion <span class="token punctuation">{</span> data <span class="token keyword">in</span>
            continuation<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>returning<span class="token punctuation">:</span> data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li><strong>Usage of the Async Function:</strong></li></ol> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">Task</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="handling-errors-2"><a href="#handling-errors-2" class="header-anchor">#</a> Handling Errors</h3> <p>Async functions can throw errors just like synchronous functions. You can use <code>try</code> with <code>await</code> to handle errors.</p> <p><strong>Error Handling Example:</strong></p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">enum</span> <span class="token class-name">DataError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> networkError
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function-definition function">fetchDataWithError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token comment">// Simulate a network delay</span>
    <span class="token keyword">await</span> <span class="token class-name">Task</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1_000_000_000</span><span class="token punctuation">)</span> <span class="token comment">// 2 seconds</span>
    <span class="token keyword">throw</span> <span class="token class-name">DataError</span><span class="token punctuation">.</span>networkError
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Usage:</strong></p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">Task</span> <span class="token punctuation">{</span>
    <span class="token keyword">do</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">fetchDataWithError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to fetch data: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="combining-async-functions"><a href="#combining-async-functions" class="header-anchor">#</a> Combining Async Functions</h3> <p>You can call multiple async functions in sequence or in parallel. Hereâ€™s how to do both:</p> <p><strong>Sequential Execution:</strong></p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">processData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> data2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data1</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data2</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Parallel Execution:</strong></p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">processDataInParallel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token keyword">let</span> data1 <span class="token operator">=</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">async</span> <span class="token keyword">let</span> data2 <span class="token operator">=</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span>data1<span class="token punctuation">,</span> data2<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">results<span class="token punctuation">.</span><span class="token number">0</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">results<span class="token punctuation">.</span><span class="token number">1</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Swift's <code>async</code>/<code>await</code> provides a streamlined way to handle asynchronous code, making it easier to read and write. Converting from callback-based asynchronous code involves:</p> <ol><li><strong>Creating an <code>async</code> function</strong> using <code>withCheckedContinuation</code> or <code>withUnsafeContinuation</code>.</li> <li><strong>Calling async functions</strong> using <code>await</code> in a <code>Task</code> or another async context.</li> <li><strong>Handling errors</strong> with <code>try</code> and <code>catch</code> in async functions.</li> <li><strong>Managing concurrency</strong> with async let for parallel execution.</li></ol> <h3 id="throwing-and-catching-errors"><a href="#throwing-and-catching-errors" class="header-anchor">#</a> Throwing and Catching Errors</h3> <p>Error handling is an essential aspect of programming, ensuring that our apps can handle unexpected conditions gracefully. In Swift, error handling is managed using a clear and concise system that involves throwing and catching errors. Letâ€™s explore how errors are defined, thrown, and caught, along with best practices to ensure clean, maintainable code.</p> <p>In Swift, errors are represented by types that conform to the <code>Error</code> protocol. This protocol has no requirements, so any type can conform to itâ€”typically an <code>enum</code> is used to model different error conditions.</p> <p>Hereâ€™s an example:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">enum</span> <span class="token class-name">NetworkError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> badURL
    <span class="token keyword">case</span> requestFailed
    <span class="token keyword">case</span> noData
    <span class="token keyword">case</span> decodingError
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>In this example, <code>NetworkError</code> defines possible issues that can arise during a network request, such as a malformed URL or a failed data decoding operation.</p> <h3 id="throwing-errors"><a href="#throwing-errors" class="header-anchor">#</a> Throwing Errors</h3> <p>Once errors are defined, they can be thrown using the <code>throw</code> keyword. Any function that can throw an error must be marked with the <code>throws</code> keyword. Hereâ€™s an example where we throw errors during a network request simulation:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">fetchData</span><span class="token punctuation">(</span>from urlString<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">Data</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> urlString<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token class-name">NetworkError</span><span class="token punctuation">.</span>badURL
    <span class="token punctuation">}</span>

    <span class="token comment">// Simulate a network request</span>
    <span class="token keyword">let</span> success <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">if</span> <span class="token operator">!</span>success <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token class-name">NetworkError</span><span class="token punctuation">.</span>requestFailed
    <span class="token punctuation">}</span>

    <span class="token comment">// Simulate received data</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Response data&quot;</span></span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>using<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token class-name">NetworkError</span><span class="token punctuation">.</span>noData
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> data
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>In this function, various errors are thrown if conditions are not met: an invalid URL, a failed request, or no data being available.</p> <h4 id="important-points-to-remember"><a href="#important-points-to-remember" class="header-anchor">#</a> Important Points to Remember</h4> <ul><li>A function that throws an error must explicitly declare <code>throws</code> in its signature.</li> <li>Inside the function, errors are thrown using <code>throw</code>.</li> <li>Throwing an error interrupts the normal flow of the function, and the error must be handled by the caller.</li></ul> <h3 id="catching-errors"><a href="#catching-errors" class="header-anchor">#</a> Catching Errors</h3> <p>To handle an error, Swift uses <code>do-catch</code> blocks. You place the code that might throw an error inside the <code>do</code> block and handle potential errors in one or more <code>catch</code> blocks.</p> <p>Hereâ€™s how you can catch the error from the <code>fetchData(from:)</code> function:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">do</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;invalid-url&quot;</span></span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Data received: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">NetworkError</span><span class="token punctuation">.</span>badURL <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Error: The URL is invalid.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">NetworkError</span><span class="token punctuation">.</span>requestFailed <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Error: The network request failed.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Error: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error<span class="token punctuation">.</span>localizedDescription</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="key-points"><a href="#key-points" class="header-anchor">#</a> Key Points</h4> <ul><li><code>try</code> is used before a function that throws an error.</li> <li>If the function throws an error, the flow moves to the appropriate <code>catch</code> block.</li> <li><code>catch</code> can either handle specific errors (like <code>NetworkError.badURL</code>) or catch all errors using a generic <code>catch</code> clause.</li> <li>The <code>localizedDescription</code> property of <code>Error</code> provides a user-friendly description of the error.</li></ul> <h3 id="try-and-try-simplifying-error-handling"><a href="#try-and-try-simplifying-error-handling" class="header-anchor">#</a> <code>try?</code> and <code>try!</code>: Simplifying Error Handling</h3> <p>Swift provides two shorthand ways of handling errors when you donâ€™t need full <code>do-catch</code> error handling:</p> <h4 id="try"><a href="#try" class="header-anchor">#</a> <code>try?</code></h4> <p>The <code>try?</code> syntax attempts to execute the throwing function but returns <code>nil</code> if an error is thrown. This is useful when you donâ€™t care about the specific error, but just want to handle success or failure.</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">if</span> <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;invalid-url&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Data received: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to fetch data.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="try-2"><a href="#try-2" class="header-anchor">#</a> <code>try!</code></h4> <p>The <code>try!</code> syntax is used when youâ€™re certain that the function wonâ€™t throw an error at runtime. If an error is thrown, the app will crash.</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">!</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;valid-url&quot;</span></span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Data received: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Use <code>try!</code> with cautionâ€”this should only be used when youâ€™re confident that no error will occur, as it bypasses error handling entirely.</p> <h3 id="rethrowing-errors"><a href="#rethrowing-errors" class="header-anchor">#</a> Rethrowing Errors</h3> <p>In some cases, you might want to rethrow an error that was caught inside a function. This can be done using the <code>rethrows</code> keyword. A function that can rethrow errors must receive a closure as an argument that itself can throw errors.</p> <p>Hereâ€™s an example:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">performTask</span><span class="token punctuation">(</span>with closure<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token keyword">rethrows</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token function">closure</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">do</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> performTask <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token class-name">NetworkError</span><span class="token punctuation">.</span>noData
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Caught rethrown error: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="when-to-use-rethrows"><a href="#when-to-use-rethrows" class="header-anchor">#</a> When to Use <code>rethrows</code></h4> <ul><li>Use <code>rethrows</code> when your functionâ€™s error-throwing capability depends on a closure passed into it. The function itself doesnâ€™t directly throw errors, but if the closure throws, the function rethrows it.</li></ul> <h3 id="handling-errors-with-result-type"><a href="#handling-errors-with-result-type" class="header-anchor">#</a> Handling Errors with <code>Result</code> Type</h3> <p>Another approach for managing error handling in Swift is by using the <code>Result</code> type. The <code>Result</code> type allows you to return either a success value or a failure with an error.</p> <p>Hereâ€™s an example of how to use <code>Result</code>:</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">fetchDataResult</span><span class="token punctuation">(</span>from urlString<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">Data</span><span class="token punctuation">,</span> <span class="token class-name">NetworkError</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> urlString<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badURL<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Simulate network success</span>
    <span class="token keyword">let</span> success <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">if</span> <span class="token operator">!</span>success <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token punctuation">.</span>requestFailed<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Simulate received data</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Response data&quot;</span></span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>using<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token punctuation">.</span>noData<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">fetchDataResult</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;invalid-url&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">switch</span> result <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">let</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Data received: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">data</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">let</span> error<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Error occurred: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="benefits-of-result"><a href="#benefits-of-result" class="header-anchor">#</a> Benefits of <code>Result</code></h4> <ul><li>Provides a clear way to handle success and failure cases.</li> <li>Avoids the need for <code>try</code> and <code>catch</code> in simple scenarios.</li> <li>Offers better clarity when dealing with asynchronous operations.</li></ul> <h3 id="best-practices-for-error-handling"><a href="#best-practices-for-error-handling" class="header-anchor">#</a> Best Practices for Error Handling</h3> <ol><li><strong>Use Specific Errors</strong>: Create custom error types that provide meaningful information about what went wrong.</li> <li><strong>Gracefully Handle Errors</strong>: Always provide user-friendly error messages and avoid crashing the app unnecessarily.</li> <li><strong>Limit the Use of <code>try!</code></strong>: Use <code>try!</code> sparingly, as it can lead to crashes if an unexpected error occurs.</li> <li><strong>Consider <code>Result</code> for Complex Operations</strong>: For functions that may return multiple values or need better clarity around success/failure, prefer the <code>Result</code> type over <code>throws</code>.</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/2/2025, 9:38:11 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/w2025/modules/week9/exercises.html" class="prev">
        ðŸ¤¯ Exercises
      </a></span> <span class="next"><a href="/w2025/modules/week10/lecture2.html">
        REST APIs ðŸš€
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/w2025/assets/js/app.89661042.js" defer></script><script src="/w2025/assets/js/2.19621ee8.js" defer></script><script src="/w2025/assets/js/1.884addea.js" defer></script><script src="/w2025/assets/js/38.9e90ebe0.js" defer></script>
  </body>
</html>
