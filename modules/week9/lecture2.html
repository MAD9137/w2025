<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Callback Strategies 🚀 | MAD9137</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="iOS App Development">
    
    <link rel="preload" href="/w2025/assets/css/0.styles.b90e271b.css" as="style"><link rel="preload" href="/w2025/assets/js/app.89661042.js" as="script"><link rel="preload" href="/w2025/assets/js/2.19621ee8.js" as="script"><link rel="preload" href="/w2025/assets/js/1.884addea.js" as="script"><link rel="preload" href="/w2025/assets/js/85.2c52868b.js" as="script"><link rel="prefetch" href="/w2025/assets/js/10.14d5c403.js"><link rel="prefetch" href="/w2025/assets/js/11.03916557.js"><link rel="prefetch" href="/w2025/assets/js/12.b43e8f2c.js"><link rel="prefetch" href="/w2025/assets/js/13.6649c7b8.js"><link rel="prefetch" href="/w2025/assets/js/14.88d905c8.js"><link rel="prefetch" href="/w2025/assets/js/15.7e17213b.js"><link rel="prefetch" href="/w2025/assets/js/16.e53c757f.js"><link rel="prefetch" href="/w2025/assets/js/17.3cc02802.js"><link rel="prefetch" href="/w2025/assets/js/18.81d0be88.js"><link rel="prefetch" href="/w2025/assets/js/19.ca440789.js"><link rel="prefetch" href="/w2025/assets/js/20.5a6b51cb.js"><link rel="prefetch" href="/w2025/assets/js/21.fdfc60c0.js"><link rel="prefetch" href="/w2025/assets/js/22.d45beffc.js"><link rel="prefetch" href="/w2025/assets/js/23.748b914a.js"><link rel="prefetch" href="/w2025/assets/js/24.562b255d.js"><link rel="prefetch" href="/w2025/assets/js/25.07dd87ce.js"><link rel="prefetch" href="/w2025/assets/js/26.a99defbe.js"><link rel="prefetch" href="/w2025/assets/js/27.57083705.js"><link rel="prefetch" href="/w2025/assets/js/28.e39dc93e.js"><link rel="prefetch" href="/w2025/assets/js/29.a5b2f49c.js"><link rel="prefetch" href="/w2025/assets/js/3.f5bb6a7e.js"><link rel="prefetch" href="/w2025/assets/js/30.de0a6d63.js"><link rel="prefetch" href="/w2025/assets/js/31.bfc16249.js"><link rel="prefetch" href="/w2025/assets/js/32.d9c060a0.js"><link rel="prefetch" href="/w2025/assets/js/33.a2d064ce.js"><link rel="prefetch" href="/w2025/assets/js/34.b8161021.js"><link rel="prefetch" href="/w2025/assets/js/35.a40d4351.js"><link rel="prefetch" href="/w2025/assets/js/36.9403338f.js"><link rel="prefetch" href="/w2025/assets/js/37.d8fe8075.js"><link rel="prefetch" href="/w2025/assets/js/38.9e90ebe0.js"><link rel="prefetch" href="/w2025/assets/js/39.25172786.js"><link rel="prefetch" href="/w2025/assets/js/4.86681f1d.js"><link rel="prefetch" href="/w2025/assets/js/40.6681711c.js"><link rel="prefetch" href="/w2025/assets/js/41.f4e3d0a0.js"><link rel="prefetch" href="/w2025/assets/js/42.8c656f3d.js"><link rel="prefetch" href="/w2025/assets/js/43.31dda87d.js"><link rel="prefetch" href="/w2025/assets/js/44.24c69334.js"><link rel="prefetch" href="/w2025/assets/js/45.5e16c653.js"><link rel="prefetch" href="/w2025/assets/js/46.044a1533.js"><link rel="prefetch" href="/w2025/assets/js/47.1830e7db.js"><link rel="prefetch" href="/w2025/assets/js/48.9be09712.js"><link rel="prefetch" href="/w2025/assets/js/49.4451aa8c.js"><link rel="prefetch" href="/w2025/assets/js/5.adc9a5d1.js"><link rel="prefetch" href="/w2025/assets/js/50.81e47b6b.js"><link rel="prefetch" href="/w2025/assets/js/51.3b191912.js"><link rel="prefetch" href="/w2025/assets/js/52.479b82bb.js"><link rel="prefetch" href="/w2025/assets/js/53.729d7b6c.js"><link rel="prefetch" href="/w2025/assets/js/54.4a8647ab.js"><link rel="prefetch" href="/w2025/assets/js/55.055c6480.js"><link rel="prefetch" href="/w2025/assets/js/56.1812c123.js"><link rel="prefetch" href="/w2025/assets/js/57.b2aeb55f.js"><link rel="prefetch" href="/w2025/assets/js/58.9f74ca68.js"><link rel="prefetch" href="/w2025/assets/js/59.973fa6ff.js"><link rel="prefetch" href="/w2025/assets/js/6.6eb1a791.js"><link rel="prefetch" href="/w2025/assets/js/60.dbaf804d.js"><link rel="prefetch" href="/w2025/assets/js/61.bf2bcd99.js"><link rel="prefetch" href="/w2025/assets/js/62.c8975600.js"><link rel="prefetch" href="/w2025/assets/js/63.1dc95d7a.js"><link rel="prefetch" href="/w2025/assets/js/64.b1f5fc8e.js"><link rel="prefetch" href="/w2025/assets/js/65.37d03985.js"><link rel="prefetch" href="/w2025/assets/js/66.cf8375ea.js"><link rel="prefetch" href="/w2025/assets/js/67.f92bb3ff.js"><link rel="prefetch" href="/w2025/assets/js/68.779861c3.js"><link rel="prefetch" href="/w2025/assets/js/69.cc00bcbf.js"><link rel="prefetch" href="/w2025/assets/js/7.b2a63ac7.js"><link rel="prefetch" href="/w2025/assets/js/70.362eb054.js"><link rel="prefetch" href="/w2025/assets/js/71.aad5c756.js"><link rel="prefetch" href="/w2025/assets/js/72.1a4b2363.js"><link rel="prefetch" href="/w2025/assets/js/73.aa3beb5c.js"><link rel="prefetch" href="/w2025/assets/js/74.25ee9996.js"><link rel="prefetch" href="/w2025/assets/js/75.3bca0c1f.js"><link rel="prefetch" href="/w2025/assets/js/76.ed9eeaee.js"><link rel="prefetch" href="/w2025/assets/js/77.2d013309.js"><link rel="prefetch" href="/w2025/assets/js/78.aba051f0.js"><link rel="prefetch" href="/w2025/assets/js/79.bfa621d0.js"><link rel="prefetch" href="/w2025/assets/js/80.5ea75b6b.js"><link rel="prefetch" href="/w2025/assets/js/81.c963a39c.js"><link rel="prefetch" href="/w2025/assets/js/82.cb43b67f.js"><link rel="prefetch" href="/w2025/assets/js/83.d9e9c653.js"><link rel="prefetch" href="/w2025/assets/js/84.827a886f.js"><link rel="prefetch" href="/w2025/assets/js/86.ac7150af.js"><link rel="prefetch" href="/w2025/assets/js/87.b3adcd6f.js"><link rel="prefetch" href="/w2025/assets/js/vendors~docsearch.02634ae8.js">
    <link rel="stylesheet" href="/w2025/assets/css/0.styles.b90e271b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/w2025/" class="home-link router-link-active"><!----> <span class="site-name">MAD9137</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/w2025/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/modules/week1/lecture1.html" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/w2025/assessment/" class="nav-link">
  Assessments
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/w2025/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/w2025/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/w2025/modules/week1/lecture1.html" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/w2025/assessment/" class="nav-link">
  Assessments
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week1/" class="sidebar-heading clickable"><span>Week 1</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week2/" class="sidebar-heading clickable"><span>Week 2</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week3/" class="sidebar-heading clickable"><span>Week 3</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week4/" class="sidebar-heading clickable"><span>Week 4</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week5/" class="sidebar-heading clickable"><span>Week 5</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week6/" class="sidebar-heading clickable"><span>Week 6</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week7/" class="sidebar-heading clickable"><span>Week 7</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/w2025/modules/week8/" class="sidebar-link">Week 8</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week9/" class="sidebar-heading clickable router-link-active open"><span>Week 9</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/w2025/modules/week9/lecture1.html" class="sidebar-link">Data Binding 🚀</a></li><li><a href="/w2025/modules/week9/lecture2.html" aria-current="page" class="active sidebar-link">Callback Strategies 🚀</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/w2025/modules/week9/lecture2.html#delegation" class="sidebar-link">Delegation</a></li><li class="sidebar-sub-header"><a href="/w2025/modules/week9/lecture2.html#closures" class="sidebar-link">Closures</a></li></ul></li><li><a href="/w2025/modules/week9/exercises.html" class="sidebar-link">🤯 Exercises</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week10/" class="sidebar-heading clickable"><span>Week 10</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week11/" class="sidebar-heading clickable"><span>Week 11</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week12/" class="sidebar-heading clickable"><span>Week 12</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week13/" class="sidebar-heading clickable"><span>Week 13</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/w2025/modules/week14/" class="sidebar-heading clickable"><span>Week 14</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/w2025/modules/week15/" class="sidebar-link">Week 15</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="callback-strategies-🚀"><a href="#callback-strategies-🚀" class="header-anchor">#</a> Callback Strategies 🚀</h1> <p>In Swift development, handling asynchronous tasks and communication between objects is essential. Various callback strategies allow objects to communicate and respond to events or changes in a modular, reusable way. This section covers two widely-used callback strategies: Delegation and Closures.</p> <p>Both strategies provide unique ways to decouple logic and improve code flexibility, allowing for easier maintenance and testing.</p> <h2 id="delegation"><a href="#delegation" class="header-anchor">#</a> Delegation</h2> <p>Delegation is a design pattern in which one object (the delegate) is assigned the responsibility to act on behalf of another object (the delegator). This pattern is particularly useful for handling events, providing data, or responding to user interactions, while allowing the delegator to stay focused on its core responsibility. It's a powerful way to promote separation of concerns in code.</p> <p>In UIKit, delegation is frequently used, but in SwiftUI, it's less common due to the declarative nature of the framework. However, delegation can still be relevant when creating reusable custom views or in specific use cases.</p> <h3 id="example-use-case-uitableview"><a href="#example-use-case-uitableview" class="header-anchor">#</a> <strong>Example Use Case: UITableView</strong></h3> <p>In UIKit, delegation is commonly used in views like <code>UITableView</code>, where the table view delegates the responsibility for managing its rows to a separate object (usually its view controller). By defining a delegate, the table view can inform the controller when a row is selected, edited, or needs to be displayed.</p> <p>In SwiftUI, a similar concept can be applied using views with <code>@Binding</code> or <code>@EnvironmentObject</code>. However, sometimes we might still want to implement a delegate-style pattern to keep views lean and delegate responsibilities to other objects.</p> <h3 id="implementation-of-delegation"><a href="#implementation-of-delegation" class="header-anchor">#</a> <strong>Implementation of Delegation</strong></h3> <ol><li><strong>Define a Delegate Protocol:</strong></li></ol> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">protocol</span> <span class="token class-name">MyViewDelegate</span><span class="token punctuation">:</span> <span class="token class-name">AnyObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">didSelectRow</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function-definition function">didLongPressRow</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The protocol defines the methods that the delegate will implement, giving the delegator a standardized way to communicate with its delegate.</p> <ol start="2"><li><strong>Set Up the Delegator (The View in SwiftUI):</strong></li></ol> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">struct</span> <span class="token class-name">MyListView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> delegate<span class="token punctuation">:</span> <span class="token class-name">MyViewDelegate</span><span class="token operator">?</span>
    <span class="token keyword">let</span> items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span>indices<span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token punctuation">\</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> index <span class="token keyword">in</span>
            <span class="token class-name">Text</span><span class="token punctuation">(</span>items<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span>onTapGesture <span class="token punctuation">{</span>
                    delegate<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">didSelectRow</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token punctuation">.</span>onLongPressGesture <span class="token punctuation">{</span>
                    delegate<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">didLongPressRow</span><span class="token punctuation">(</span>at<span class="token punctuation">:</span> index<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Here, the <code>MyListView</code> informs the delegate when a user selects or long-presses on a row. It doesn’t need to know what happens next—only that the event has occurred.</p> <ol start="3"><li><strong>Implement the Delegate in Another Class:</strong></li></ol> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">struct</span> <span class="token class-name">ContentView</span><span class="token punctuation">:</span> <span class="token class-name">View</span><span class="token punctuation">,</span> <span class="token class-name">MyViewDelegate</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">didSelectRow</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Selected row at </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function-definition function">didLongPressRow</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Long pressed row at </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
        <span class="token class-name">MyListView</span><span class="token punctuation">(</span>delegate<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Item 1&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Item 2&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Item 3&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>In this example, <code>ContentView</code> implements the delegate methods, taking control over what happens when a row is selected or long-pressed.</p> <h3 id="additional-example-custom-modal-delegation"><a href="#additional-example-custom-modal-delegation" class="header-anchor">#</a> <strong>Additional Example: Custom Modal Delegation</strong></h3> <p>For another example, imagine we have a custom modal view that handles user input. We could use delegation to notify the parent view when the modal is dismissed and pass the entered data back to the parent view.</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">protocol</span> <span class="token class-name">ModalDelegate</span><span class="token punctuation">:</span> <span class="token class-name">AnyObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">didSubmitData</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> data<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span>
    <span class="token keyword">func</span> <span class="token function-definition function">didCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">ModalView</span><span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> delegate<span class="token punctuation">:</span> <span class="token class-name">ModalDelegate</span><span class="token operator">?</span>
    <span class="token attribute atrule">@State</span> <span class="token keyword">private</span> <span class="token keyword">var</span> inputText <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span>

    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span>
        <span class="token class-name">VStack</span> <span class="token punctuation">{</span>
            <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Enter data&quot;</span></span><span class="token punctuation">,</span> text<span class="token punctuation">:</span> $inputText<span class="token punctuation">)</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Submit&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                delegate<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">didSubmitData</span><span class="token punctuation">(</span>inputText<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Cancel&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                delegate<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">didCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>In this case, the parent view (or controller) can decide how to handle the submission or cancellation of the modal, keeping the modal itself focused on UI concerns.</p> <h2 id="closures"><a href="#closures" class="header-anchor">#</a> Closures</h2> <p>Closures in Swift are self-contained blocks of code that can be passed around and executed at a later time. They capture and store references to variables and constants from their surrounding context, allowing deferred or asynchronous execution.</p> <p>Closures are a more lightweight alternative to delegation, providing a flexible and concise way to manage callbacks without the need for protocol conformance.</p> <h3 id="_1-closure-syntax-and-types"><a href="#_1-closure-syntax-and-types" class="header-anchor">#</a> <strong>1. Closure Syntax and Types</strong></h3> <p>Closures can have varying degrees of complexity, from simple one-liners to complex blocks that accept and return values.</p> <h4 id="basic-closure-syntax"><a href="#basic-closure-syntax" class="header-anchor">#</a> <strong>Basic Closure Syntax:</strong></h4> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token punctuation">{</span> <span class="token punctuation">(</span>parameters<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> returnType <span class="token keyword">in</span>
    <span class="token comment">// code</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Closures can omit parameters, return types, or even the <code>in</code> keyword, depending on the context, making them incredibly flexible.</p> <h4 id="example-basic-closure"><a href="#example-basic-closure" class="header-anchor">#</a> <strong>Example: Basic Closure</strong></h4> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> greet<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello, World!&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Output: Hello, World!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Closures can be stored as variables or constants and can be passed to functions as arguments.</p> <h3 id="_2-closure-as-callbacks"><a href="#_2-closure-as-callbacks" class="header-anchor">#</a> <strong>2. Closure as Callbacks</strong></h3> <p>Closures are frequently used as callbacks to handle asynchronous operations, such as network requests or animations.</p> <h4 id="example-handling-completion-of-a-network-request"><a href="#example-handling-completion-of-a-network-request" class="header-anchor">#</a> <strong>Example: Handling Completion of a Network Request</strong></h4> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">typealias</span> <span class="token class-name">CompletionHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Error</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span>

<span class="token keyword">func</span> <span class="token function-definition function">fetchData</span><span class="token punctuation">(</span>completion<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token class-name">CompletionHandler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Simulating a network request</span>
    <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token comment">// Simulate a success response</span>
        <span class="token keyword">let</span> result<span class="token punctuation">:</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Error</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Data fetched&quot;</span></span><span class="token punctuation">)</span>
        <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
            <span class="token function">completion</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Here, the closure is passed as a completion handler, allowing the function to call it once the asynchronous task (fetching data) is finished.</p> <h4 id="extended-example-image-downloading-with-closures"><a href="#extended-example-image-downloading-with-closures" class="header-anchor">#</a> <strong>Extended Example: Image Downloading with Closures</strong></h4> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">typealias</span> <span class="token class-name">ImageDownloadCompletion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">UIImage</span><span class="token punctuation">,</span> <span class="token class-name">Error</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span>

<span class="token keyword">func</span> <span class="token function-definition function">downloadImage</span><span class="token punctuation">(</span>from url<span class="token punctuation">:</span> <span class="token constant">URL</span><span class="token punctuation">,</span> completion<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token class-name">ImageDownloadCompletion</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span><span class="token function">global</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token comment">// Simulate network delay and image fetching</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token class-name">UIImage</span><span class="token punctuation">(</span>systemName<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;photo&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
                <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span>
                <span class="token function">completion</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token class-name">NSError</span><span class="token punctuation">(</span>domain<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;DownloadError&quot;</span></span><span class="token punctuation">,</span> code<span class="token punctuation">:</span> <span class="token number">404</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">downloadImage</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;https://example.com/image&quot;</span></span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> result <span class="token keyword">in</span>
    <span class="token keyword">switch</span> result <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">let</span> image<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Image downloaded: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">image</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">let</span> error<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to download image: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>This example demonstrates how closures handle both success and failure cases, improving error handling and making the code more robust.</p> <h3 id="_3-capturing-values-in-closures"><a href="#_3-capturing-values-in-closures" class="header-anchor">#</a> <strong>3. Capturing Values in Closures</strong></h3> <p>When closures capture variables from their surrounding context, they &quot;close over&quot; those variables, meaning they retain and can later modify those values.</p> <h4 id="example-capturing-values"><a href="#example-capturing-values" class="header-anchor">#</a> <strong>Example: Capturing Values</strong></h4> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">makeIncrementer</span><span class="token punctuation">(</span>incrementAmount<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> total <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        total <span class="token operator">+=</span> incrementAmount
        <span class="token function">print</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> incrementByTwo <span class="token operator">=</span> <span class="token function">makeIncrementer</span><span class="token punctuation">(</span>incrementAmount<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">incrementByTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Output: 2</span>
<span class="token function">incrementByTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Output: 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>In this case, the closure captures <code>total</code> from its surrounding context, keeping track of the total across multiple calls.</p> <h4 id="extended-example-capturing-values-in-animations"><a href="#extended-example-capturing-values-in-animations" class="header-anchor">#</a> <strong>Extended Example: Capturing Values in Animations</strong></h4> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">startAnimation</span><span class="token punctuation">(</span>duration<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> animationProgress <span class="token operator">=</span> <span class="token number">0.0</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        animationProgress <span class="token operator">+=</span> <span class="token number">1</span> <span class="token operator">/</span> duration
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Progress: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">animationProgress</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> animate <span class="token operator">=</span> <span class="token function">startAnimation</span><span class="token punctuation">(</span>duration<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Output: Progress: 0.2</span>
<span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Output: Progress: 0.4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Closures enable encapsulating logic that modifies values over time, making them ideal for handling animations or state changes.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/6/2025, 4:58:03 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/w2025/modules/week9/lecture1.html" class="prev">
        Data Binding 🚀
      </a></span> <span class="next"><a href="/w2025/modules/week9/exercises.html">
        🤯 Exercises
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/w2025/assets/js/app.89661042.js" defer></script><script src="/w2025/assets/js/2.19621ee8.js" defer></script><script src="/w2025/assets/js/1.884addea.js" defer></script><script src="/w2025/assets/js/85.2c52868b.js" defer></script>
  </body>
</html>
